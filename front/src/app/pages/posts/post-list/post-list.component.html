<div class="post-list">
  @if (isLoading) {
    <div class="post-list__loading">
      <app-loader 
        text="Chargement des articles..."
        [fullScreen]="true"
        color="primary">
      </app-loader>
    </div>
  }

  @if (hasError) {
    <div class="post-list__error">
      <p class="post-list__error-message">{{ ERROR_MESSAGES.FETCH }}</p>
    </div>
  } @else {
    @if (!hasData) {
      <div class="post-list__empty">
        <p class="post-list__empty-message">Aucun article disponible...</p>
      </div>
    }

    <div class="post-list__header">
      <button 
        mat-flat-button 
        color="primary" 
        class="post-list__create-button"
        (click)="onCreatePost()">
        Créer un article
      </button>

      @if (hasData) {
        <button 
          class="post-list__sort-button"
          [class.post-list__sort-button--asc]="isAscending"
          [class.post-list__sort-button--desc]="!isAscending"
          (click)="onSortPosts()">
          Trier par date {{ isAscending ? '▲' : '▼' }}
        </button>
      }
    </div>

    <div class="post-list__container">
      @for (post of posts; track post.id) {
        <div class="post-list__item" (click)="onPostClick(post)">
          <app-post-card 
            [id]="post.id"
            [title]="post.title"
            [description]="post.description"
            [author]="post.author"
            [date]="post.createdAt">
          </app-post-card>
        </div>
      }
    </div>
  }
</div>
  